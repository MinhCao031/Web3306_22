{"ast":null,"code":"var _jsxFileName = \"/home/thainguyen/Source/uet-smta-test/src/Forum/Posts/ModalBtn.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Button from '@mui/material/Button';\nimport IconButton from '@mui/material/IconButton';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport Modal from '@mui/material/Modal';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport { TextField } from '@mui/material';\nimport './Modal.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst boxStyle = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: 900,\n  height: 600,\n  bgcolor: '#F4F5FA',\n  border: '2px solid #000',\n  boxShadow: 24,\n  p: 4\n};\n\nfunction postBtn(_ref) {\n  let {\n    btnName,\n    handleClickOpen\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleClickOpen,\n    children: btnName\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n\nfunction editBtn(_ref2) {\n  let {\n    handleClickOpen\n  } = _ref2;\n  return /*#__PURE__*/_jsxDEV(IconButton, {\n    color: \"default\",\n    \"aria-label\": \"edit\",\n    onClick: handleClickOpen,\n    children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n\nfunction ModalBtn(_ref3) {\n  _s();\n\n  let {\n    btnName,\n    title,\n    submitBtn,\n    headingText,\n    contentText,\n    setHeadingText,\n    setContentText,\n    setPosts,\n    posts,\n    edit = false,\n    post\n  } = _ref3;\n  const [open, setOpen] = React.useState(false);\n  const [addErrorMessage, setAddErrorMessage] = useState(false);\n  const [editErrorMessage, setEditErrorMessage] = useState(false);\n  const username = JSON.parse(sessionStorage.getItem('user')) ? JSON.parse(sessionStorage.getItem('user')).username : '';\n  const name = JSON.parse(sessionStorage.getItem('user')) ? JSON.parse(sessionStorage.getItem('user')).name : '';\n  const [textEdit, setTextEdit] = useState({\n    headingText: '',\n    contentText: ''\n  });\n  useEffect(() => {\n    if (edit) {\n      axios.get(`/posts/show/${post.id}`).then(res => {\n        setTextEdit({\n          headingText: res.data.title,\n          contentText: res.data.content\n        });\n      }).catch(err => console.log(err));\n    }\n  }, []);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n\n    if (!edit) {\n      setHeadingText('');\n      setContentText('');\n      setAddErrorMessage(false);\n    } else {\n      axios.get(`/posts/show/${post.id}`).then(res => {\n        setTextEdit({\n          headingText: res.data.title,\n          contentText: res.data.content\n        });\n      }).catch(err => console.log(err));\n      setEditErrorMessage(false);\n    }\n  };\n\n  const handleHeadingChange = e => {\n    setAddErrorMessage(false);\n    setHeadingText(e.target.value);\n  };\n\n  const handleContentChange = e => {\n    setAddErrorMessage(false);\n    setContentText(e.target.value);\n  };\n\n  const handleTextEditChange = e => {\n    setEditErrorMessage(false);\n    setTextEdit({ ...textEdit,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    if (!edit) {\n      if (headingText === '' || contentText === '') {\n        setAddErrorMessage(true);\n      } else {\n        axios.post(`http://localhost:5000/api/posts/create/${username}`, {\n          title: headingText,\n          content: contentText\n        }).then(res => {\n          setPosts([...posts, {\n            createdAt: res.data.createdAt,\n            id: res.data.postId,\n            owner: name,\n            ownerId: username,\n            quantityComments: res.data.commentIds.length,\n            title: headingText\n          }]);\n        }).catch(err => {\n          console.log(err);\n        });\n        axios.post(`/notifications/create/${username}?type=bài đăng`).then(res => {\n          console.log(res.data);\n        }).catch(err => {\n          console.log(err);\n        });\n        handleClose();\n      }\n    } else {\n      if (textEdit.headingText === '' || textEdit.contentText === '') {\n        setEditErrorMessage(true);\n      } else {\n        axios.post(`/posts/update/${post.id}`, {\n          title: textEdit.headingText,\n          content: textEdit.contentText\n        }).then(res => {\n          setPosts([...posts.filter(p => p.id !== post.id), {\n            createdAt: post.createdAt,\n            id: post.id,\n            owner: name,\n            ownerId: username,\n            quantityComments: post.quantityComments,\n            title: textEdit.headingText\n          }]);\n        }).catch(err => console.log(err));\n        setOpen(false);\n      }\n    }\n\n    e.preventDefault();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [edit ? editBtn({\n      handleClickOpen: handleClickOpen\n    }) : postBtn({\n      btnName: btnName,\n      handleClickOpen\n    }), /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"modal-modal-title\",\n      \"aria-describedby\": \"modal-modal-description\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: boxStyle,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          id: \"modal-modal-title\",\n          align: \"center\",\n          sx: {\n            mb: 2.5\n          },\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), !edit ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            required: true,\n            id: \"filled-basic\",\n            label: \"Ti\\xEAu \\u0111\\u1EC1\",\n            variant: \"filled\",\n            defaultValue: headingText,\n            fullWidth: true,\n            sx: {\n              mb: 2.5\n            },\n            inputProps: {\n              maxLength: 80\n            },\n            onChange: handleHeadingChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            required: true,\n            id: \"filled-basic\",\n            label: \"N\\u1ED9i dung\",\n            variant: \"filled\",\n            defaultValue: contentText,\n            rows: 12,\n            fullWidth: true,\n            multiline: true,\n            onChange: handleContentChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            required: true,\n            id: \"filled-basic\",\n            label: \"Ti\\xEAu \\u0111\\u1EC1\",\n            variant: \"filled\",\n            defaultValue: textEdit.headingText,\n            fullWidth: true,\n            sx: {\n              mb: 2.5\n            },\n            inputProps: {\n              maxLength: 80\n            },\n            name: \"headingText\",\n            onChange: handleTextEditChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            required: true,\n            id: \"filled-basic\",\n            label: \"N\\u1ED9i dung\",\n            variant: \"filled\",\n            defaultValue: textEdit.contentText,\n            rows: 12,\n            fullWidth: true,\n            multiline: true,\n            name: \"contentText\",\n            onChange: handleTextEditChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-forum\",\n          children: [edit && editErrorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: '0px 70px 0px 0px',\n              color: 'red'\n            },\n            children: \"Vui l\\xF2ng \\u0111i\\u1EC1n \\u0111\\u1EA7y \\u0111\\u1EE7 th\\xF4ng tin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), !edit && addErrorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: '0px 70px 0px 0px',\n              color: 'red'\n            },\n            children: \"Vui l\\xF2ng \\u0111i\\u1EC1n \\u0111\\u1EA7y \\u0111\\u1EE7 th\\xF4ng tin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"error\",\n            onClick: handleClose,\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            sx: {\n              ml: 4\n            },\n            onClick: handleSubmit,\n            children: submitBtn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ModalBtn, \"mfFWHwUfFqpQ8OVRYnQLYVEslDY=\");\n\n_c = ModalBtn;\nexport default ModalBtn;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModalBtn\");","map":{"version":3,"sources":["/home/thainguyen/Source/uet-smta-test/src/Forum/Posts/ModalBtn.js"],"names":["React","useState","useEffect","Button","IconButton","EditIcon","DeleteIcon","Modal","Typography","Box","TextField","axios","boxStyle","position","top","left","transform","width","height","bgcolor","border","boxShadow","p","postBtn","btnName","handleClickOpen","editBtn","ModalBtn","title","submitBtn","headingText","contentText","setHeadingText","setContentText","setPosts","posts","edit","post","open","setOpen","addErrorMessage","setAddErrorMessage","editErrorMessage","setEditErrorMessage","username","JSON","parse","sessionStorage","getItem","name","textEdit","setTextEdit","get","id","then","res","data","content","catch","err","console","log","handleClose","handleHeadingChange","e","target","value","handleContentChange","handleTextEditChange","handleSubmit","createdAt","postId","owner","ownerId","quantityComments","commentIds","length","filter","preventDefault","mb","maxLength","margin","color","ml"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Button from '@mui/material/Button';\nimport IconButton from '@mui/material/IconButton';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport Modal from '@mui/material/Modal';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport { TextField } from '@mui/material';\nimport './Modal.css';\nimport axios from 'axios';\n\nconst boxStyle = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: 900,\n  height: 600,\n  bgcolor: '#F4F5FA',\n  border: '2px solid #000',\n  boxShadow: 24,\n  p: 4,\n};\n\nfunction postBtn({ btnName, handleClickOpen }) {\n  return (\n    <Button variant=\"contained\" color=\"primary\" onClick={handleClickOpen}>\n      {btnName}\n    </Button>\n  );\n}\n\nfunction editBtn({ handleClickOpen }) {\n  return (\n    <IconButton color=\"default\" aria-label=\"edit\" onClick={handleClickOpen}>\n      <EditIcon />\n    </IconButton>\n  );\n}\n\nfunction ModalBtn({\n  btnName,\n  title,\n  submitBtn,\n  headingText,\n  contentText,\n  setHeadingText,\n  setContentText,\n  setPosts,\n  posts,\n  edit = false,\n  post,\n}) {\n  const [open, setOpen] = React.useState(false);\n  const [addErrorMessage, setAddErrorMessage] = useState(false);\n  const [editErrorMessage, setEditErrorMessage] = useState(false);\n  const username = JSON.parse(sessionStorage.getItem('user'))\n    ? JSON.parse(sessionStorage.getItem('user')).username\n    : '';\n  const name = JSON.parse(sessionStorage.getItem('user'))\n    ? JSON.parse(sessionStorage.getItem('user')).name\n    : '';\n  const [textEdit, setTextEdit] = useState({\n    headingText: '',\n    contentText: '',\n  });\n  useEffect(() => {\n    if (edit) {\n      axios\n        .get(`/posts/show/${post.id}`)\n        .then((res) => {\n          setTextEdit({\n            headingText: res.data.title,\n            contentText: res.data.content,\n          });\n        })\n        .catch((err) => console.log(err));\n    }\n  }, []);\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n  const handleClose = () => {\n    setOpen(false);\n    if (!edit) {\n      setHeadingText('');\n      setContentText('');\n      setAddErrorMessage(false);\n    } else {\n      axios\n        .get(`/posts/show/${post.id}`)\n        .then((res) => {\n          setTextEdit({\n            headingText: res.data.title,\n            contentText: res.data.content,\n          });\n        })\n        .catch((err) => console.log(err));\n      setEditErrorMessage(false);\n    }\n  };\n  const handleHeadingChange = (e) => {\n    setAddErrorMessage(false);\n    setHeadingText(e.target.value);\n  };\n  const handleContentChange = (e) => {\n    setAddErrorMessage(false);\n    setContentText(e.target.value);\n  };\n  const handleTextEditChange = (e) => {\n    setEditErrorMessage(false);\n    setTextEdit({ ...textEdit, [e.target.name]: e.target.value });\n  };\n  const handleSubmit = (e) => {\n    if (!edit) {\n      if (headingText === '' || contentText === '') {\n        setAddErrorMessage(true);\n      } else {\n        axios\n          .post(`http://localhost:5000/api/posts/create/${username}`, {\n            title: headingText,\n            content: contentText,\n          })\n          .then((res) => {\n            setPosts([\n              ...posts,\n              {\n                createdAt: res.data.createdAt,\n                id: res.data.postId,\n                owner: name,\n                ownerId: username,\n                quantityComments: res.data.commentIds.length,\n                title: headingText,\n              },\n            ]);\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n        axios\n          .post(`/notifications/create/${username}?type=bài đăng`)\n          .then((res) => {\n            console.log(res.data);\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n        handleClose();\n      }\n    } else {\n      if (textEdit.headingText === '' || textEdit.contentText === '') {\n        setEditErrorMessage(true);\n      } else {\n        axios\n          .post(`/posts/update/${post.id}`, {\n            title: textEdit.headingText,\n            content: textEdit.contentText,\n          })\n          .then((res) => {\n            setPosts([\n              ...posts.filter((p) => p.id !== post.id),\n              {\n                createdAt: post.createdAt,\n                id: post.id,\n                owner: name,\n                ownerId: username,\n                quantityComments: post.quantityComments,\n                title: textEdit.headingText,\n              },\n            ]);\n          })\n          .catch((err) => console.log(err));\n        setOpen(false);\n      }\n    }\n    e.preventDefault();\n  };\n  return (\n    <div>\n      {edit\n        ? editBtn({ handleClickOpen: handleClickOpen })\n        : postBtn({ btnName: btnName, handleClickOpen })}\n      <Modal\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\"\n      >\n        <Box sx={boxStyle}>\n          {/* Move typography to center of Box */}\n          <Typography\n            variant=\"h4\"\n            id=\"modal-modal-title\"\n            align=\"center\"\n            sx={{ mb: 2.5 }}\n          >\n            {title}\n          </Typography>\n\n          {!edit ? (\n            <>\n              <TextField\n                required\n                id=\"filled-basic\"\n                label=\"Tiêu đề\"\n                variant=\"filled\"\n                defaultValue={headingText}\n                fullWidth\n                sx={{ mb: 2.5 }}\n                inputProps={{ maxLength: 80 }}\n                onChange={handleHeadingChange}\n              />\n\n              <TextField\n                required\n                id=\"filled-basic\"\n                label=\"Nội dung\"\n                variant=\"filled\"\n                defaultValue={contentText}\n                rows={12}\n                fullWidth\n                multiline\n                onChange={handleContentChange}\n              />\n            </>\n          ) : (\n            <>\n              <TextField\n                required\n                id=\"filled-basic\"\n                label=\"Tiêu đề\"\n                variant=\"filled\"\n                defaultValue={textEdit.headingText}\n                fullWidth\n                sx={{ mb: 2.5 }}\n                inputProps={{ maxLength: 80 }}\n                name=\"headingText\"\n                onChange={handleTextEditChange}\n              />\n\n              <TextField\n                required\n                id=\"filled-basic\"\n                label=\"Nội dung\"\n                variant=\"filled\"\n                defaultValue={textEdit.contentText}\n                rows={12}\n                fullWidth\n                multiline\n                name=\"contentText\"\n                onChange={handleTextEditChange}\n              />\n            </>\n          )}\n\n          <div className=\"btn-forum\">\n            {edit && editErrorMessage && (\n              <p style={{ margin: '0px 70px 0px 0px', color: 'red' }}>\n                Vui lòng điền đầy đủ thông tin\n              </p>\n            )}\n            {!edit && addErrorMessage && (\n              <p style={{ margin: '0px 70px 0px 0px', color: 'red' }}>\n                Vui lòng điền đầy đủ thông tin\n              </p>\n            )}\n            <Button variant=\"contained\" color=\"error\" onClick={handleClose}>\n              Hủy\n            </Button>\n\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              sx={{ ml: 4 }}\n              onClick={handleSubmit}\n            >\n              {submitBtn}\n            </Button>\n          </div>\n        </Box>\n      </Modal>\n    </div>\n  );\n}\nexport default ModalBtn;\n"]},"metadata":{},"sourceType":"module"}